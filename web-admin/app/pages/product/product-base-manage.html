<!--Page Title-->
<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
<div id="page-title">
    <h1 class="page-header text-overflow">产品管理</h1>

    <!--Searchbox-->
    <!--<div class="searchbox" ng-include="'pages/search-box.html'"></div>-->
</div>
<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
<!--End page title-->

<!--Page content-->
<!--===================================================-->
<div id="page-content">
    <div class="panel panel-bordered-primary">
        <div class="animated zoomIn">

            <div class="col-md-offset-9" style="padding: 20px 20px 0px 0px">
                <select class="form-control"
                        ng-model="currOrg"
                        ng-change="orgChange(currOrg)">
                    <option ng-repeat="org in orgList"
                            value="{{org.id}}">
                        {{org.name}}
                    </option>
                </select>
            </div>

            <div class="panel-body">
                <table class="table toggle-arrow-tiny" id="proBaseTable">
                    <thead>
                    <tr>
                        <th>名称</th>
                        <th>状态</th>
                        <th>品类</th>
                        <th>条码</th>
                        <th class="col-md-1">保质期</th>
                        <th class="col-md-1">产品码类型</th>
                        <th class="col-md-2">可用额度</th>
                        <th>创建时间</th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="pb in dataTable.pageable.data track by pb.id" id="pb.id">
                        <td>{{pb.name}}</td>
                        <td><span
                                class="label {{pb.status_code_show == 'reject' ? 'label-danger' : (pb.status_code_show == 'active' ? 'label-success' : 'label-primary')}}">{{formatProStatusShow(pb.status_code_show)}}</span>
                        </td>
                        <td>{{pb.category ? pb.category.name : '未知'}}</td>
                        <td>{{pb.barcode}}</td>
                        <td>{{pb.shelf_life + " " + SHELFLIFE_INTERVALS[pb.shelf_life_interval]}}</td>
                        <td>
                            <div key-type="pb.product_key_types"></div>
                        </td>
                        <td>
                            <div class="progress-group"><span
                                    class="progress-number"><span
                                    class="text-semibold">{{pb.credit.remain}}</span>{{pb.credit ? '/'+pb.credit.total : ''}}</span>

                                <div class="progress progress-md">
                                    <div class="progress-bar {{(pb.credit.percentage)<=10 ? 'progress-bar-danger':'progress-bar-primary' }}
                                progress-bar-striped active"
                                         ng-style="{width: pb.credit.percentage + '%'}"></div>
                                </div>
                            </div>
                        </td>
                        <td>{{utils.formatDateString(pb.created_datetime)}}</td>
                        <td>
                            <button type="button" class="btn btn-info fa fa-edit"
                                    ng-show="pb.status_code_show == 'wait'"
                                    ng-click="productBase.showProductBaseDetails(pb.id, pb.status_code_show, pb.product_base_versions[pb.product_base_versions.length - 1].version)">
                                审核
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <div class="pull-right pagination" dt-pageable="dataTable.pageable">
                </div>
            </div>
        </div>
    </div>

</div>
<!--===================================================-->
<!--End page content-->
