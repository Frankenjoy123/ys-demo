<!--Page Title-->
<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
<div id="page-title">
    <h1 class="page-header text-overflow">产品管理</h1>

    <!--Searchbox-->
    <!--<div class="searchbox" ng-include="'pages/search-box.html'"></div>-->
</div>
<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
<!--End page title-->

<!--Page content-->
<!--===================================================-->
<div id="page-content">
    <div class="panel panel-bordered-primary">
        <div class="animated slideInRight">
            <div class="col-md-12 pull-left" style="padding: 20px 20px;" ng-show="productBaseButtonShow">
                <button id="btn-addrow" class="btn btn-primary btn-labeled fa fa-plus"
                        ng-click="productBase.showCreateProduct()">创建产品
                </button>
            </div>
            <div class="panel-body">
                <table class="table toggle-arrow-tiny" id="proBaseTable">
                    <thead>
                    <tr>
                        <th>名称</th>
                        <th>品类</th>
                        <th>条码</th>
                        <th class="col-md-1">保质期</th>
                        <th class="col-md-1">产品码类型</th>
                        <th class="col-md-1">可用额度</th>
                        <th class="col-md-2">创建时间</th>
                        <th class="col-md-1">操作</th>
                        <th data-hide="all"></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="pb in dataTable.pageable.data track by pb.id" id="pb.id">
                        <td>{{pb.name}}</td>
                        <td>{{pb.category ? pb.category.name : '未知'}}</td>
                        <td>{{pb.barcode}}</td>
                        <td>{{pb.shelf_life + " " + SHELFLIFE_INTERVALS[pb.shelf_life_interval]}}</td>

                        <td>
                        <span ng-repeat="type in pb.product_key_types">

                            <span ng-show="type.code == 'qr_public'" class="btn-hover-info add-tooltip"
                                  data-placement="bottom" data-toggle="tooltip" data-original-title="二维码"
                                  onMouseOver="$(this).tooltip('show')"><i class="fa fa-qrcode fa-lg"
                                                                           style="color:#5cb85c"></i></span>
                            <span ng-show="type.code == 'qr_secure'" class="btn-hover-info add-tooltip"
                                  data-placement="bottom" data-toggle="tooltip" data-original-title="隐藏二维码"
                                  onMouseOver="$(this).tooltip('show')"><i class="fa fa-qrcode fa-lg"></i></span>
                            <span ng-show="type.code == 'rfid'" class="btn-hover-info add-tooltip"
                                  data-placement="bottom" data-toggle="tooltip" data-original-title="RFID标签"
                                  onMouseOver="$(this).tooltip('show')"><i class="fa fa-rss fa-lg"></i></span>
                        </span>
                        </td>
                        <td>
                            <div class="progress-group"><span
                                    class="progress-number"><span
                                    class="text-semibold">{{pb.credit.remain}}</span>{{pb.credit ? '/'+pb.credit.total : ''}}</span>

                                <div class="progress progress-md">
                                    <div class="progress-bar {{(pb.credit.percentage)<=10 ? 'progress-bar-danger':'progress-bar-primary' }}
                                progress-bar-striped active"
                                         ng-style="{width: pb.credit.percentage + '%'}"></div>
                                </div>
                            </div>
                        </td>
                        <td>{{utils.formatDateString(pb.created_datetime)}}</td>
                        <td class="text-center">
                            <button type="button" class="btn btn-info fa fa-edit"
                                    ng-click="productBase.editProductBaseDetails(pb.id)">
                            </button>
                            <button type="button" class="btn btn-success fa fa-eye"
                                    ng-click="productBase.showProductBaseDetails(pb.id)">
                            </button>
                        </td>
                        <td>
                            <div>
                                <strong>版本:</strong>{{pb.id}}&nbsp;&nbsp;&nbsp;&nbsp;<strong>状态:</strong><span
                                    class="label"
                                    ng-class="{'label-success':(pb.statusCode == 'created' || pb.statusCode == 'activated'),'label-info':(pb.statusCode == 'recalled' || pb.statusCode == 'deleted')}">{{formatStatusCode(pb.statusCode)}}</span>&nbsp;&nbsp;&nbsp;&nbsp;<strong>操作:</strong>
                                <a style="color:#5cb85c" ng-click="productBase.showProductBaseDetails(pb.id)"><i
                                        class="fa fa-eye" style="cursor: pointer"></i></a>
                                <a style="color:#5bc0de"
                                   ng-click="productBase.editProductBaseDetails(pb.id)"><i class="fa fa-edit"
                                                                                           style="cursor: pointer"></i></a>
                            </div>
                            <div>
                                <strong>版本:</strong>{{pb.id}}&nbsp;&nbsp;&nbsp;&nbsp;<strong>状态:</strong><span
                                    class="label"
                                    ng-class="{'label-success':(pb.statusCode == 'created' || pb.statusCode == 'activated'),'label-info':(pb.statusCode == 'recalled' || pb.statusCode == 'deleted')}">{{formatStatusCode(pb.statusCode)}}</span>&nbsp;&nbsp;&nbsp;&nbsp;<strong>操作:</strong>
                                <a style="color:#5cb85c" ng-click="productBase.showProductBaseDetails(pb.id)"><i
                                        class="fa fa-eye" style="cursor: pointer"></i></a>
                            </div>
                            <div>
                                <strong>版本:</strong>{{pb.id}}&nbsp;&nbsp;&nbsp;&nbsp;<strong>状态:</strong><span
                                    class="label"
                                    ng-class="{'label-success':(pb.statusCode == 'created' || pb.statusCode == 'activated'),'label-info':(pb.statusCode == 'recalled' || pb.statusCode == 'deleted')}">{{formatStatusCode(pb.statusCode)}}</span>&nbsp;&nbsp;&nbsp;&nbsp;<strong>操作:</strong>
                                <a style="color:#5cb85c" ng-click="productBase.showProductBaseDetails(pb.id)"><i
                                        class="fa fa-eye" style="cursor: pointer"></i></a>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <div class="pull-right pagination" dt-pageable="dataTable.pageable">
                </div>
            </div>
        </div>
    </div>

</div>
<!--===================================================-->
<!--End page content-->
