<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>
        用户管理
        <!--<small>Control panel</small>-->
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i>首页</a></li>
        <li class="active">用户管理</li>
    </ol>
</section>
<!-- Main content -->
<section class="content" ng-controller="productKeyManageCtrl">
    <script type="text/javascript">
        $(function () {
            $('#accountTable').dataTable({
                "bPaginate": false,
                "bLengthChange": false,
                "bFilter": false,
                "bSort": true,
                "bAutoWidth": false,
                "bInfo": false
            });
        });
    </script>
    <div class="box-group" ng-controller="accountManageCtrl">
        <div class="panel box box-primary">
            <div class="box-body table-responsive">
                <div class="dataTables_wrapper form-inline" role="grid">
                    <!--<div class="row col-xs-12">-->
                        <!--<div class="col-xs-6">-->
                            <!--<button class="btn btn-primary dropdown-toggle" data-toggle="dropdown">每页记录数<span-->
                                    <!--class="fa fa-caret-down"></span></button>-->
                            <!--<ul class="dropdown-menu">-->
                                <!--<li ng-click="setPaging(10)"><a>10</a></li>-->
                                <!--<li ng-click="setPaging(25)"><a>25</a></li>-->
                                <!--<li ng-click="setPaging(50)"><a>50</a></li>-->
                                <!--<li ng-click="setPaging(100)"><a>100</a></li>-->
                            <!--</ul>-->
                        <!--</div>-->
                    <!--</div>-->
                    <div class="col-xs-12">
                        <table id="accountTable" class="table table-hover dataTable">
                            <thead>
                            <tr role="row">
                                <th>ID</th>
                                <th ng-click='sort("employeeID")'>工号
                                </th>
                                <th ng-click='sort("name")'>姓名
                                </th>
                                <th ng-click='sort("status")'>状态
                                </th>
                                <th ng-click='sort("role")'>职位
                                </th>
                                <th ng-click='sort("phone")'>电话
                                </th>
                                <th ng-click='sort("email")'>邮箱
                                </th>
                                <th ng-click='sort("SSID")'>身份证号
                                </th>
                                <th width="5%"></th>
                            </tr>
                            </thead>
                            <tbody ng-repeat="account in data.filteredAccounts">
                            <tr>
                                <td>
                                    <span>{{$index + 1 + paging.index * paging.size}}</span>
                                </td>
                                <td>
                                    <span ng-hide='account.mode'>{{account.employeeID}}</span>
                                    <input ng-show='account.mode' ng-model='account.employeeID'/>
                                </td>
                                <td>
                                    <span ng-hide='account.mode'>{{account.name}}</span>
                                    <input ng-show='account.mode' ng-model='account.name'/>
                                </td>
                                <td>{{account.status ? "启用中" : "已停用"}}</td>
                                <td>{{getRole(account.role)}}</td>
                                <td>
                                    <span ng-hide='account.mode'>{{account.phone}}</span>
                                    <input ng-show='account.mode' ng-model='account.phone'/>
                                </td>
                                <td>
                                    <span ng-hide='account.mode'>{{account.email}}</span>
                                    <input ng-show='account.mode' ng-model='account.email'/>
                                </td>
                                <td>
                                    <span ng-hide='account.mode'>{{account.SSID}}</span>
                                    <input ng-show='account.mode' ng-model='account.SSID'/>
                                </td>
                                <td>
                                    <button ng-show='!account.mode' class="btn btn-primary btn-sm"
                                            ng-click='editRow(account)'>
                                        <i class="fa fa-edit"></i> 编辑
                                    </button>
                                    <button ng-show='account.mode' class="btn btn-default btn-sm"
                                            ng-click='cancelRow(account)'>
                                        <i class="fa fa-undo"></i> 放弃
                                    </button>
                                    <button ng-show='account.mode' class="btn btn-primary btn-sm"
                                            ng-click='saveRow(account)'>
                                        <i class="fa fa-save"></i> 保存
                                    </button>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="col-xs-6">
                        <p>显示 {{currentPageStart()}} 到
                            {{currentPageEnd()}} 条记录</p>
                    </div>
                    <div class="col-xs-6">
                        <div class="dataTables_paginate paging_bootstrap">
                            <ul class="pagination">
                                <li class="prev" ng-class="{ disabled: paging.index<1}"><a
                                        ng-click="paging.index>0&&gotoPage(paging.index-1)">上一页</a></li>
                                <li ng-repeat-start="page in pages()" ng-repeat-end
                                    ng-class="{active: paging.index === page - 1}"><a
                                        ng-click="gotoPage(page - 1)">{{page}}</a></li>
                                <li class="next"
                                    ng-class="{ disabled: data.accounts.length < (paging.index+1)*paging.size}"><a
                                        ng-click="data.accounts.length >= (paging.index+1)*paging.size && gotoPage(paging.index+1)">下一页</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>